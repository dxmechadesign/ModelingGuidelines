# 2次元図面からモデリングする場合の定義
modeling_guidelines:
  # 1. 図面投影法の理解
  projection_methods:
    # 1.1 投影法の種類と地域性
    third_angle_projection:
      regions: ["日本", "アメリカ", "カナダ"]
      is_standard: true
  	layout_variations:
    	  standard_layout:
      	  front_view: "中央"
      	  top_view: "正面図の上"
      	  right_side_view: "正面図の右"
    
    	alternate_layout_type1:
      	  description: "縦配置レイアウト"
      	  top_view: "上段"
      	  front_view: "中段左または下段左"
      	  right_side_view: "中段右または下段右"
      	  note: "スペース効率を考慮した配置"
    
    first_angle_projection:
      regions: ["ヨーロッパ"]
      is_standard: false
      layout:
        front_view: "中央"
        top_view: "正面図の下"
        right_side_view: "正面図の左"
        bottom_view: "正面図の上"
        left_side_view: "正面図の右"

    # 1.2 基本原則
    fundamental_principles:
      primary_view:
        name: "正面図"
        status: "必ず存在する基準図"
        role: "全ての他図面の基準となる"
        identification: "全ての他図面の基準となる"
      
      derivative_views:
        concept: "正面図以外は全て正面図から派生した図"
        relationship: "正面図との投影関係で定義される"
        validation_method: "外形線の延長による位置確認"
    
    # 1.3 図面識別の体系的手順
    view_identification_process:
      front_view_identification:
        fundamental_principle: "正面図は投影線対応が唯一の基準であり、詳細さ・複雑さ・配置位置は補助的要素に過ぎない"
        primary_method: "投影線対応関係による機械的かつ系統的な特定"
        steps:
          1: "全図面候補の輪郭線を上下左右に延長し、隣接図面の輪郭線と幾何学的に一致するかを確認"
          2: "寸法の幾何学的整合性（各軸の寸法が他図面と一致するか）を必ず検証"
          3: "詳細さ・複雑さ・配置位置（中央・角など）は一切判断基準にしない"
          4: "思い込みや期待を排除し、必ず投影線対応を機械的に確認"
        warning: "投影線対応以外の要素（詳細さ・複雑さ・配置位置）は正面図判定の根拠にしてはならない"

      projection_line_primacy:
        principle: "投影線対応関係が図面識別の唯一の客観的基準"
        method: "物理的配置→投影線確認→寸法の幾何学的整合性検証→整合性が取れる図面を正面図と特定"
        critical_understanding:
          - "正面図の位置や詳細さ・複雑さは一切考慮しない"
          - "投影線の延長と寸法の幾何学的整合性のみで判断"
          - "思い込みや期待を排除し、必ず機械的に確認"
        verification_sequence:
          step1: "候補図面の輪郭線を上下左右に延長"
          step2: "延長線が隣接図面の対応する輪郭線と一致するか確認"
          step3: "全方向で整合性が取れる図面を正面図と特定"

      layout_pattern_recognition:
        principle: "配置は投影関係の手がかりであり、絶対的基準ではない"
        common_patterns:
          center_reference:
            description: "中央の図面が正面図"
            verification: "中央図面からの投影線が周辺図面と対応"
          corner_reference:
            description: "角の図面が正面図"
            verification: "角図面からの投影線が隣接図面と対応"
          non_standard:
            description: "非標準配置"
            approach: "配置に惑わされず投影線対応のみで判定"
        critical_rule: "配置パターンは参考程度。投影線対応が最終判定基準"

      common_identification_errors:
        detail_bias:
          error: "詳細な図面を正面図と判断する"
          cause: "複雑性への期待バイアス"
          prevention: "詳細さではなく投影関係で判断"
        position_assumption:
          error: "中央の図面を無条件で正面図とする"
          cause: "標準配置への思い込み"
          prevention: "必ず投影線対応を確認"
        complexity_expectation:
          error: "複雑な形状情報を含む図面を正面図とする"
          cause: "正面図=重要図面という誤解"
          prevention: "正面図は基準図であり、必ずしも複雑ではない"

    # 1.4 各図面の配置関係と識別方法
    view_relationships:
      top_view:
        position: "正面図の上"
        projection_direction: "Z軸正方向から見下ろし"
        verification:
          width_correspondence: "正面図のX軸幅 = 上面図のX軸幅"
          projection_line: "正面図の左右輪郭線を上に延長 → 上面図の左右輪郭線と一致"
        identifying_features:
          - "穴が円形で表示される（Z軸方向の穴の場合）"
          - "高さ情報（Z軸）が失われる"
      
      bottom_view:
        position: "正面図の下"
        projection_direction: "Z軸負方向から見上げ"
        verification:
          width_correspondence: "正面図のX軸幅 = 下面図のX軸幅"
          projection_line: "正面図の左右輪郭線を下に延長 → 下面図の左右輪郭線と一致"
        note: "上面図の裏側から見た図"
      
      right_side_view:
        position: "正面図の右"
        projection_direction: "X軸正方向から見る"
        verification:
          height_correspondence: "正面図のZ軸高さ = 右側面図のZ軸高さ"
          depth_correspondence: "正面図に見えないY軸奥行き = 右側面図のX軸幅"
          projection_line: "正面図の上下輪郭線を右に延長 → 右側面図の上下輪郭線と一致"
      
      left_side_view:
        position: "正面図の左"
        projection_direction: "X軸負方向から見る"
        verification:
          height_correspondence: "正面図のZ軸高さ = 左側面図のZ軸高さ"
          projection_line: "正面図の上下輪郭線を左に延長 → 左側面図の上下輪郭線と一致"
        note: "右側面図の反対側から見た図"
      
      rear_view:
        position: "右側面図の右"
        projection_direction: "Y軸負方向から見る（正面図の反対方向）"
        verification:
          width_correspondence: "正面図のX軸幅 = 背面図のX軸幅"
          height_correspondence: "正面図のZ軸高さ = 背面図のZ軸高さ"
        note: "正面図の裏側から見た図"

    # 1.5 投影線による図面関係の確認方法
    projection_line_verification:
      horizontal_projection:
        rule: "水平方向の投影線は高さ（Z軸）情報を保持"
        application:
          - "正面図 ↔ 右側面図"
          - "正面図 ↔ 左側面図"
          - "上面図 ↔ 下面図（間接的）"
        verification_method: "正面図の水平線を左右に延長 → 側面図の対応する水平線と一致"
      
      vertical_projection:
        rule: "垂直方向の投影線は幅（X軸）情報を保持"
        application:
          - "正面図 ↔ 上面図"
          - "正面図 ↔ 下面図"
          - "右側面図 ↔ 背面図（間接的）"
        verification_method: "正面図の垂直線を上下に延長 → 上下面図の対応する垂直線と一致"
      
      depth_projection:
        rule: "奥行き（Y軸）情報は90度回転した図面で表現"
        application:
          - "上面図の縦方向 = 右側面図の横方向"
          - "正面図で見えない奥行き = 側面図の幅"

    # 1.6 図面識別の実践的手順
    practical_identification_steps:
      step1_layout_mapping:
        action: "図面の物理的配置をマッピング"
        method:
          - "中央または最大の図面を正面図候補として特定"
          - "周辺図面の相対位置を記録"
          - "図面間の距離と配置パターンを確認"
      
      step2_projection_line_check:
        action: "投影線の対応関係を確認"
        procedure:
          front_to_top:
            check: "正面図の左右端を上に延長 → 上の図面の左右端と一致するか"
            result_if_yes: "上の図面は上面図"
          
          front_to_right:
            check: "正面図の上下端を右に延長 → 右の図面の上下端と一致するか"
            result_if_yes: "右の図面は右側面図"
          
          front_to_left:
            check: "正面図の上下端を左に延長 → 左の図面の上下端と一致するか"
            result_if_yes: "左の図面は左側面図"
          
          front_to_bottom:
            check: "正面図の左右端を下に延長 → 下の図面の左右端と一致するか"
            result_if_yes: "下の図面は下面図"
      
      step3_consistency_verification:
        action: "図面間の整合性を総合確認"
        checks:
          dimensional_consistency:
            - "対応する軸の寸法が一致するか"
            - "隠れ線が適切に表現されているか"
          
          feature_consistency:
            - "同一フィーチャーが各図面で正しく投影されているか"
            - "穴、切欠きなどの位置関係が整合するか"

    # 1.7 特殊配置パターンへの対応
    special_layout_patterns:
      compact_layout:
        description: "スペース節約のための非標準配置"
        approach: "投影線対応関係を最優先で判定"
        warning: "位置関係だけでは判定不可"
      
      partial_view_layout:
        description: "一部の図面のみ表示"
        approach: "存在する図面間の関係から推定"
        method: "投影線の延長による仮想図面の想定"
      
      rotated_layout:
        description: "図面が回転配置されている場合"
        approach: "回転を考慮した投影線対応確認"
        note: "稀なケースだが存在する"

    # 1.8 エラー防止のための確認項目
    error_prevention_checklist:
      before_identification:
        preparation:
          - "[ ] 正面図を明確に特定した"
          - "[ ] 周辺図面の配置を確認した"
          - "[ ] 図面のサイズ比較を行った"
      
      during_identification:
        projection_check:
          - "[ ] 正面図から上への投影線を確認"
          - "[ ] 正面図から右への投影線を確認"
          - "[ ] 正面図から左への投影線を確認"
          - "[ ] 正面図から下への投影線を確認"
      
      after_identification:
        consistency_check:
          - "[ ] 各図面の寸法対応を確認"
          - "[ ] フィーチャーの投影整合性を確認"
          - "[ ] 隠れ線の表現が適切か確認"
      
      common_mistake_prevention:
        critical_warnings:
          - "⚠️ 位置だけでなく投影線対応を必ず確認"
          - "⚠️ 思い込みではなく実際の線の延長で判定"
          - "⚠️ 全ての図面が正面図との関係で定義される"

    # 1.9 投影法の理解における重要ポイント
    key_principles:
      core_concepts:
        - "正面図が全ての基準である"
        - "投影線の延長による確認が必須である"
        - "位置関係だけでは不十分である"
        - "外形線の対応関係が図面種別の決定要因である"
      
      benefit: "これらの原則に従うことで、図面配置に惑わされることなく正確な図面識別が可能になります。"

  # 2. 座標軸の定義
  coordinate_system:
    standard:
      x_axis: "水平方向（左右）"
      y_axis: "奥行き方向（手前・奥）"
      z_axis: "垂直方向（上下）"
    
    view_correspondence:
      front_view:
        visible_axes: ["X", "Z"]
        hidden_axis: "Y"
        x_direction: "水平方向"
        z_direction: "垂直方向"
      
      top_view:
        visible_axes: ["X", "Y"]
        hidden_axis: "Z"
        x_direction: "水平方向"
        y_direction: "垂直方向"
      
      right_side_view:
        visible_axes: ["Y", "Z"]
        hidden_axis: "X"
        y_direction: "水平方向"
        z_direction: "垂直方向"

    # 2.1 軸対応関係の明確化（追加）
    coordinate_system_detailed:
      axis_direction_mapping:
        front_view:
          horizontal_axis: "X軸（左右方向）"
          vertical_axis: "Z軸（上下方向）"
          note: "Y軸（奥行き）は見えない"
        
        right_side_view:
          horizontal_axis: "Y軸（左右方向）"
          vertical_axis: "Z軸（上下方向）"
          note: "X軸（幅）は見えない"
        
        top_view:
          horizontal_axis: "X軸（左右方向）"
          vertical_axis: "Y軸（上下方向）"
          note: "Z軸（高さ）は見えない"

      critical_understanding:
        rule1: "各図面の水平方向と垂直方向が、必ずしも同じ軸を表すとは限らない"
        rule2: "図面の向きと軸の対応を必ず確認してから寸法を読み取る"
        example:
          confusion_point: "右側面図の垂直方向はZ軸であり、水平方向はY軸である"
          correct_interpretation: "右側面図：水平=Y軸、垂直=Z軸"
      
      # 軸対応関係エラーの防止（追加）
      axis_correspondence_error_prevention:
        critical_warning:
          message: "⚠️ 右側面図の垂直方向はZ軸であり、水平方向はY軸である"
          explanation: "右側面図は[Y軸-Z軸]平面を示すため、垂直方向=Z軸、水平方向=Y軸"
        
        verification_method:
          step1: "図面名を確認（正面図/右側面図/上面図）"
          step2: "その図面で見える軸を特定"
          step3: "水平/垂直方向とX,Y,Z軸の対応を明確化"
          step4: "他の図面との整合性を確認"
        
        common_misunderstanding:
          error: "図面の向きで軸を判断する"
          correct: "投影関係で軸を判断する"
          example: "右側面図だからといって右方向がX軸とは限らない"

      dimension_magnitude_check:
        rule: "寸法の大小関係に違和感があれば必ず再確認"
        examples:
          suspicious_case1: "厚みが幅より大きい場合"
          suspicious_case2: "高さが極端に小さい場合"
          suspicious_case3: "アスペクト比が異常な場合"
        
        action: "違和感を覚えた時点で全寸法の再読み取りを実施"

  # 3. 寸法読み取り原則と図面観察プロセス
  dimension_reading:
    # 3.1 基本原則
    basic_principles:
      - "各図面には複数の寸法が表示されている"
      - "各図面では特定の平面（2次元）上の寸法情報のみ把握可能"
      - "立体的な寸法情報を得るには複数図面の情報を組み合わせる必要がある"
      - "同一部品の寸法は全図面で一致する必要がある"
    
    # 3.2 優先順位
    priority_order:
      1: "直接記載された寸法線の値"
      2: "図形の比例から推定される寸法"
      3: "他図面との整合性による補完"

    # 3.3 観察プロセスの厳格化
    observation_process_critical:
      step1_complete_element_inventory:
        method: "図面の全要素を種類別に完全列挙"
        procedure:
          - "実線で囲まれた独立領域を全て特定・カウント"
          - "破線要素を全て特定・分類"
          - "記号（φ、C、R等）を全て抽出・位置記録"
          - "寸法線と数値を全て抽出・位置記録"
        verification: "要素数の再カウントによる確認"
        critical_rule: "推測を一切排除し、観察事実のみを記録"
      
      step2_element_relationship_analysis:
        method: "要素間の関係性を系統的に分析"
        procedure:
          - "実線矩形の個数と配置関係の確認"
          - "φ記号と対応する形状要素の特定"
          - "寸法線の起点・終点と対象要素の確認"
        format: "要素種類_個数_位置_対応関係"
      
      step3_cross_check:
        method: "記録した位置情報の総合確認"
        verification: "矛盾がないかの最終チェック"
    
      # 形状認識の厳格ルール（追加）
      critical_observation_rules:
        prohibition_of_assumptions:
          - "単一図面での形状判断の絶対禁止"
          - "全図面確認前の形状結論の禁止"
          - "複雑性への期待バイアスの排除"
        
        mandatory_verification:
          - "各図面が示す基本形状（矩形/円/三角など）の確認"
          - "全図面での形状一貫性の検証"
          - "不一致があって初めて複合形状を疑う"

    # 3.4 基本的観察能力の訓練
    basic_observation_training:
      fundamental_skills:
        visual_scanning:
          requirement: "図面上の要素を見落としなく抽出"
          method: "系統的な視線移動パターンの確立"
          verification: "発見した要素の位置を正確に記述可能"
        
        position_recording:
          requirement: "要素の位置を客観的に記録"
          format: "『上面図の左下』『正面図の右側』など具体的記述"
          prohibition: "曖昧な位置表現の使用禁止"
        
        fact_vs_interpretation:
          separation: "観察事実と解釈を完全分離"
          fact_example: "数値30が正面図の下部に記載"
          interpretation_example: "この30はX軸寸法である"
          rule: "事実記録段階では解釈を一切混入させない"

      # 思考プロセスの修正（追加）
      thinking_process_correction:
        observation_first_principle:
          rule: "観察事実の完全な分離保持"
          method: "事実→分類→解釈の厳格な段階分離"
          prohibition: "観察中の推測や期待の混入禁止"
        
        complexity_bias_elimination:
          awareness: "興味深い形状への期待は判断を歪める"
          approach: "最もシンプルな解釈から始める"
          rule: "複雑性は証拠が揃ってから認める"
          example: "L字型と見えても、全図面で矩形が一致していれば直方体と判断"

    # 3.5 寸法読み取りプロセスの強化
    dimension_reading_enhanced:
      critical_reading_process:
        step1_systematic_extraction:
          action: "図面ごとに表示されている全寸法を列挙"
          method: "寸法線と数値を1つずつ確実に確認"
          verification: "見落としがないか再確認"
        
        step2_axis_assignment:
          action: "各寸法をX,Y,Z軸に正確に割り当て"
          method: "図面の軸対応関係を確認しながら分類"
          warning: "推測や思い込みは禁止"
        
        step3_cross_validation:
          action: "複数図面間での寸法整合性確認"
          method: "同一軸の寸法が複数図面で一致するかチェック"
          error_handling: "不整合があれば読み取り見直し"

      common_errors_prevention:
        misreading_prevention:
          - "各図面の寸法を声に出して読み上げる（メンタルチェック）"
          - "寸法値をまず文字として認識し、その後数値として処理"
          - "隣接する寸法線との混同を避けるため1つずつ追跡"
        
        assumption_elimination:
          - "「大体このくらい」「だいたい～mm」の表現禁止"
          - "記載のない寸法は「不明」として明記"
          - "推測値と実測値を明確に区別"

    # 3.6 エラー発生原因の根本対策
    error_root_cause_analysis:
      primary_cause: "基本的な視覚情報処理の不正確性"
      contributing_factors:
        - "思い込みによる観察の歪み"
        - "推測と事実の混同"
        - "確認作業の不徹底"
        - "系統的観察方法の欠如"
        - "複雑な形状を期待するバイアス"
        - "部分的観察での早急な結論"
      
      prevention_measures:
        immediate_actions:
          - "観察時の推測思考の完全停止"
          - "発見した情報の即座の文字記録"
          - "位置情報の具体的記述の義務化"
          - "観察の機械化 - 人間の期待や推測を排除した系統的スキャン"
          - "段階的判断 - 事実収集→分類→解釈の厳格な分離"
          - "複数検証 - 同一結論を異なる方法で確認"
        
        systematic_improvements:
          - "観察→記録→確認の3段階プロセス確立"
          - "各段階での検証チェックポイント設定"
          - "エラー発生時の即座の全工程見直し"

    # 3.7 観察品質保証システム
    observation_quality_assurance:
      mandatory_procedures:
        initial_scan:
          - "[ ] 図面全体を系統的にスキャン完了"
          - "[ ] 発見した全数値を位置付きでリスト化"
          - "[ ] 記号・線種の分類完了"
        
        verification_scan:
          - "[ ] 初回記録の再確認実施"
          - "[ ] 見落とし要素の追加確認"
          - "[ ] 位置記録の正確性検証"
        
        final_validation:
          - "[ ] 観察結果の整合性確認"
          - "[ ] 推測要素の混入チェック"
          - "[ ] 事実記録の完全性確認"
      
      quality_indicators:
        success_criteria:
          - "全ての数値の位置が正確に特定されている"
          - "推測や解釈が事実記録に混入していない"
          - "複数回の確認で結果が一致している"
        
        failure_indicators:
          - "位置記録に曖昧な表現がある"
          - "数値の記載位置について確信が持てない"
          - "観察結果に矛盾がある"

      # エラー防止の強化（追加）
      error_prevention_mandatory:
        before_shape_determination:
          - "[ ] 全図面の基本形状を確認済み"
          - "[ ] 図面間の形状一貫性を確認済み"
          - "[ ] 複合形状の根拠を明確に特定済み"
        
        before_dimension_assignment:
          - "[ ] 寸法線の種類を分類済み"
          - "[ ] 基準面を特定済み"
          - "[ ] 全体寸法と位置寸法を区別済み"

    # 3.8 個人的改善計画
    personal_improvement_plan:
      immediate_actions:
        - "図面分析時は必ず系統的スキャンから開始"
        - "数値発見時は位置を具体的に記述"
        - "推測したくなったら作業を一時停止"
        - "観察結果を必ず2回以上確認"
      
      mindset_transformation:
        from_to:
          - from: "図面を見て直感的に理解しようとする"
            to: "図面を客観的データとして系統的に分析する"
          
          - from: "知識で補完しながら読み取る"
            to: "記載事実のみを正確に抽出する"

    # 3.9 寸法分類の明確化
    dimension_classification:
      overall_dimensions:
        definition: "最外側外形実線部を示す寸法が全体寸法"
        identification_method:
          step1: "各図面で外形を示す実線を特定"
          step2: "その実線の両端を結ぶ寸法線を特定"
          step3: "複数候補がある場合は最大値を選択"
          step4: "他図面での同一軸寸法との整合性確認"
        priority: "最優先で確定すべき寸法"
        verification: "複数図面で同一軸の寸法が一致"
        
      multiple_dimensions_handling:
        rule: "同一方向に複数寸法がある場合の優先順位"
        priority_order:
          1: "最外側実線間の寸法"
          2: "公差表記のある寸法（重要寸法の指標）"
          3: "部分寸法より全体を示唆する寸法"
        tolerance_recognition: "公差表記（例：5mm公差-0.1～0）は重要寸法の指標"
      
      feature_position_dimensions:
        definition: "加工フィーチャーの位置を示す寸法"
        identification: "基準面からの距離寸法"
        note: "部品外形寸法とは別に記載"
        warning: "全体寸法ではない"
        examples: ["穴の位置", "切欠きの位置"]
      
      feature_size_dimensions:
        definition: "加工フィーチャー自体のサイズ"
        identification: "φ、R、角度など"
        examples: ["φ寸法", "R寸法", "角度"]

    # 3.10 読み取り手順の体系化
    reading_procedure:
      step1_overall_dimensions:
        action: "各図面から部品全体寸法のみを抽出"
        method: "最大寸法線を特定"
        output: "X, Y, Z軸の全体寸法"
        warning: "位置寸法との混同に注意"
      
      step2_feature_positions:
        action: "フィーチャー位置寸法を抽出"
        method: "基準面からの距離寸法を特定"
        output: "各フィーチャーの3D座標"
        verification: "基準面が明確に特定できることを確認"
      
      step3_feature_sizes:
        action: "フィーチャーサイズを抽出"
        method: "φ、深さ、角度等を特定"
        output: "各フィーチャーの形状パラメータ"

    # 3.11 図面解析チェックリスト
    analysis_checklist:
      dimension_type_check:
        - "[ ] 全体寸法と位置寸法を区別できているか"
        - "[ ] 各寸法線の意味を正しく解釈しているか"
        - "[ ] フィーチャー寸法を混同していないか"
      
      axis_correspondence_check:
        - "[ ] 各図面の軸対応を正しく理解しているか"
        - "[ ] 位置寸法の基準面を特定できているか"
        - "[ ] 3D座標への変換が正確か"
      
      verification_checklist:
        mandatory_checks:
          - "[ ] 正面図のZ軸寸法を確認済み"
          - "[ ] 上面図のX,Y軸寸法を確認済み" 
          - "[ ] 側面図の対応寸法を確認済み"
          - "[ ] 全寸法値をリスト化済み"
          - "[ ] 軸割り当てを検証済み"

    # 3.12 形状認識の誤認識防止（新規追加）
    shape_recognition_error_prevention:
      common_misinterpretations:
        l_shape_illusion:
          description: "正面図の矩形を「L字型」などの複雑形状と誤認"
          root_cause: "複雑性を期待するバイアス"
          prevention: "全図面で基本形状の一貫性を確認する"
        
        extrusion_confusion:
          description: "単純な押し出し形状を複雑な形状と誤認"
          root_cause: "単一図面での早急な判断"
          prevention: "全ての図面を確認してから形状を決定"
        
        feature_vs_main_body:
          description: "加工フィーチャーを本体形状の一部と誤認"
          root_cause: "図面要素の分類不足"
          prevention: "基本形状と加工フィーチャーを明確に区別"
      
      systematic_approach:
        step1_basic_shape:
          action: "全図面の外形線のみに注目"
          method: "各図面の外形が示す基本形状を特定"
          output: "直方体/円柱/円錐など最も単純な基本形状"
        
        step2_consistency_check:
          action: "全図面間での基本形状の整合性確認"
          verification: "全ての図面が同じ基本形状を示しているか"
          decision_rule: "不一致があれば複合形状の可能性を検討"
        
        step3_feature_identification:
          action: "基本形状の中の内部線を特定"
          classification: "穴/切欠き/面取りなどの加工フィーチャー"
          separation: "基本形状と加工フィーチャーを区別"
      
      verification_checklist:
        shape_verification:
          - "[ ] 各図面の基本外形形状を特定した"
          - "[ ] 全図面間で基本形状の整合性を確認した"
          - "[ ] 不一致がある場合のみ複合形状と判断した"
          - "[ ] 判断した形状が全ての図面と整合している"
        
        feature_separation:
          - "[ ] 基本形状と加工フィーチャーを区別した"
          - "[ ] 加工フィーチャーの種類を特定した"
          - "[ ] 各フィーチャーが全図面で整合している"
    
    # 3.13 寸法識別の具体的手法（追加）
    dimension_identification_method:
      overall_dimension_identification:
        visual_characteristics:
          - "図面の最外周を示す寸法線"
          - "通常は最も長い寸法線"
          - "部品全体の境界を示している"
        
        verification_method:
          step1: "寸法線の両端が部品の最外縁に接しているか確認"
          step2: "その方向で最大の寸法値かどうか確認"
          step3: "他の図面で同じ軸の寸法と一致するか確認"
        
        common_locations:
          front_view: "上端または下端の水平寸法線、左端または右端の垂直寸法線"
          side_view: "同様に最外縁の寸法線"
          top_view: "同様に最外縁の寸法線"
      
      position_dimension_identification:
        visual_characteristics:
          - "基準面（通常は端面）からの距離を示す"
          - "フィーチャー（穴、切欠きなど）の位置を指示"
          - "全体寸法より小さい値"
        
        reference_point_identification:
          rule: "位置寸法は必ず基準面を特定する"
          method: "寸法線の起点となる面や線を確認"
          warning: "基準面が不明な場合は位置寸法として扱わない"

    dimension_reading_priority:
      priority_1: "全体寸法の特定（最優先）"
      priority_2: "軸方向の確認"
      priority_3: "位置寸法の特定"
      priority_4: "フィーチャー寸法の特定"
      
      rule: "優先順位の高い項目から順番に処理し、混同を防ぐ"
    
    # 3.14 強化版観察チェックリスト（改良）
    enhanced_observation_checklist:
      before_analysis_start:
        basic_observation:
          - "[ ] 各図面の実線要素数をカウントした"
          - "[ ] 各図面の破線要素を特定した"
          - "[ ] 全ての記号（φ、C、R、M等）を位置付きで記録した"
          - "[ ] 投影記号を確認した"
        
        element_inventory:
          - "[ ] 正面図: 実線領域_個、破線領域_個、記号_個"
          - "[ ] 右側面図: 実線領域_個、破線領域_個、記号_個"
          - "[ ] 上面図: 実線領域_個、破線領域_個、記号_個"
        
        preliminary_analysis:
          - "[ ] 複数要素がある図面を特定した"
          - "[ ] φ記号と対応要素を仮特定した"
          - "[ ] C記号と面取り対象角部を特定した"
          - "[ ] 明らかな対応関係を記録した"
      
      during_dimension_reading:
        step1_systematic_scan:
          - "[ ] 正面図を左上→右上→右下→左下の順でスキャン"
          - "[ ] 発見した全数値を位置付きで記録"
          - "[ ] 見落とし防止のため再度スキャン"
        
        step2_axis_assignment:
          - "[ ] 各図面の軸対応関係を確認"
          - "[ ] 水平方向の寸法がどの軸かを特定"
          - "[ ] 垂直方向の寸法がどの軸かを特定"
        
        step3_cross_verification:
          - "[ ] 同一軸の寸法が複数図面で整合するか確認"
          - "[ ] 矛盾がある場合は読み取りを見直し"
      
      completion_verification:
        - "[ ] X,Y,Z軸すべての寸法を特定できた"
        - "[ ] 不明な寸法は「不明」として明記した"
        - "[ ] 全寸法を再度確認した"

    error_prevention_system:
      mandatory_double_check:
        rule: "全ての寸法読み取りは必ず2回実施"
        method: "1回目と2回目で結果が一致しない場合は3回目実施"
      
      dimension_recording_format:
        required_format: "数値：○○mm → 図面名：□□ → 位置：△△ → 軸：※※"
        example: "19mm → 正面図 → 水平方向全体寸法 → X軸"
      
      contradiction_detection:
        rule: "読み取った寸法に矛盾がないか必ず確認"
        check_points:
          - "同一軸の寸法が複数図面で一致するか"
          - "全体寸法と部分寸法の関係に矛盾がないか"
          - "フィーチャー位置が全体寸法内に収まるか"

  # 4. フィーチャー識別
  feature_identification:
    # 4.1 要素分解による形状認識（新規追加）
    element_decomposition_process:
      step1_element_counting:
        method: "各図面で独立した形状要素の個数を数える"
        procedure:
          front_view:
            action: "実線で囲まれた独立領域を特定"
            example: "矩形1個 + 円形1個 = 2要素"
            note: "重なりや内包関係も考慮"
          
          side_view:
            action: "同様に独立領域を特定"
            example: "矩形2個（積み重なり） = 2要素"
            verification: "φ記号による円形要素の確認"
          
          top_view:
            action: "同様に独立領域を特定"
            note: "要素が見えない場合もある"
      
      step2_line_type_analysis:
        real_line_meaning:
          definition: "その図面から見える実際の境界線"
          implication: "形状が手前に存在している"
          example: "正面図の円形実線 → 円柱の正面投影"
        
        dashed_line_meaning:
          definition: "隠れた部分の境界線"
          implication: "形状が奥に存在している"
          example: "破線の円 → 向こう側の穴や円柱"
        
        center_line_meaning:
          definition: "対称軸や回転軸を示す"
          implication: "円形や対称形状の存在を示唆"
          note: "形状そのものではない"
      
      step3_element_classification:
        geometric_classification:
          rectangular_elements: "直方体、角柱、板状部品"
          circular_elements: "円柱、円錐、球、穴"
          complex_elements: "複数要素の組み合わせ"
        
        spatial_relationship:
          stacked: "要素が上下に積み重なっている"
          side_by_side: "要素が横に並んでいる"
          embedded: "一方の要素が他方に埋め込まれている"
          intersecting: "要素が互いに貫通している"

    # 4.2 図面間対応関係の確認
    cross_view_correspondence:
      # 必須要素カウント
      mandatory_element_counting:
        rule: "各図面の独立要素数を必ずカウント"
        procedure:
          front_view: "実線で囲まれた領域数をカウント"
          side_view: "積層する矩形の個数をカウント"
          top_view: "平面形状要素の個数をカウント"
        verification: "要素数の整合性確認"
        example: "右側面図で矩形2個 → 基部1個+突起1個"
      
      # 記号対応関係の検証
      symbol_correspondence_verification:
        φ_symbol_analysis:
          rule: "φ記号がある矩形は円柱要素"
          verification: "他図面で円形要素として表現されるか確認"
          example: "右側面図φ12矩形 → 正面図または上面図で円形確認"
        c_symbol_analysis:
          rule: "C記号は面取り加工指示"
          verification: "角部に適用される表面加工"
          example: "4-C0.5 → 4つの角部に0.5mm面取り"
      
      element_matching_process:
        step1_element_inventory:
          action: "各図面の要素リストを作成"
          format: "図面名：要素1（形状・サイズ）、要素2（形状・サイズ）..."
          example: 
            front_view: "矩形（19×30）、円形（φ12）"
            side_view: "矩形1（Z×5）、矩形2（φ12×4.5）"
        
        step2_correspondence_check:
          method: "同一要素が他の図面でどう見えるかを確認"
          verification_points:
            size_consistency: "対応する寸法が一致するか"
            position_consistency: "相対位置が整合するか"
            projection_logic: "投影関係が論理的に正しいか"
          
          example_analysis:
            front_circle_vs_side_rectangle:
              question: "正面図の円形φ12 vs 右側面図の矩形φ12×4.5"
              verification: "位置関係、サイズ、投影方向の整合性"
              conclusion: "同一要素（円柱）の異なる投影"
        
        step3_shape_synthesis:
          rule: "全図面で整合する3D形状を推定"
          method: "各要素の3D形状を特定し、組み合わせ方を決定"
          verification: "推定した3D形状が全図面と一致するか確認"
      
      # 投影論理の検証
      projection_logic_verification:
        consistency_check:
          - "突起と判断した要素が全図面で論理的に整合するか"
          - "穴と判断した要素が適切に破線表現されているか"
          - "同一要素の寸法が図面間で一致するか"
          - "面取りが適切な位置（角部）に指示されているか"

    # 4.3 複合形状の系統的分析（新規追加）
    composite_shape_analysis:
      identification_triggers:
        multiple_elements_per_view:
          trigger: "1つの図面に複数の独立要素がある"
          example: "正面図に矩形と円形が両方存在"
          action: "複合形状の可能性を検討"
        
        dimensional_inconsistency:
          trigger: "単一基本形状では説明できない寸法関係"
          example: "高さが段階的に変化している"
          action: "積層構造や段差構造を検討"
        
        feature_symbols:
          trigger: "φ、R、面取りなどの記号が基本形状に追加"
          example: "矩形にφ記号が併記"
          action: "基本形状＋加工フィーチャーの組み合わせ"
      
      composite_types:
        stacked_composition:
          description: "複数の基本形状が積み重なった構造"
          identification: "右側面図で高さ方向に複数の矩形"
          example: "ベース直方体 + 上部円柱"
          modeling_approach: "下から順番に要素を追加"
        
        side_by_side_composition:
          description: "複数の基本形状が横に並んだ構造"
          identification: "平面図で幅方向に複数の形状"
          example: "L字型、T字型の構造"
          modeling_approach: "基本形状の結合演算"
        
        embedded_composition:
          description: "一方の形状に他方が埋め込まれた構造"
          identification: "破線による内部形状の表現"
          example: "穴あき部品、中空構造"
          modeling_approach: "基本形状からの減算演算"
      
      analysis_procedure:
        step1_primary_shape:
          action: "最も大きな（基本となる）形状要素を特定"
          criteria: "寸法が最大、全図面で確認できる"
          example: "19×30×5の直方体部分"
        
        step2_secondary_shapes:
          action: "追加される形状要素を特定"
          criteria: "基本形状に付加される要素"
          example: "φ12×4.5の円柱部分"
        
        step3_spatial_relationship:
          action: "要素間の3D配置関係を特定"
          method: "各図面での位置関係から推定"
          verification: "全図面で位置関係が整合するか確認"

    # 4.4 形状確定の検証システム（新規追加）
    shape_verification_system:
      before_shape_conclusion:
        element_completeness_check:
          - "[ ] 全図面の全要素を特定した"
          - "[ ] 各要素の3D形状を決定した"
          - "[ ] 要素間の配置関係を明確化した"
        
        consistency_verification:
          - "[ ] 推定形状が正面図と一致する"
          - "[ ] 推定形状が右側面図と一致する"
          - "[ ] 推定形状が上面図と一致する"
          - "[ ] 寸法の整合性を確認した"
        
        logic_check:
          - "[ ] 投影関係が論理的に正しい"
          - "[ ] 製造可能な形状である"
          - "[ ] 機能的に合理的である"
      
      common_error_prevention:
        oversimplification:
          error: "複合形状を単一形状と誤認"
          prevention: "必ず各図面の要素数を確認"
          example: "矩形＋円形を単なる直方体と誤認しない"
        
        line_type_misinterpretation:
          error: "実線と破線の意味を混同"
          prevention: "線種の意味を必ず確認"
          example: "実線の円は円柱、破線の円は穴"
        
        projection_confusion:
          error: "図面間の対応関係を間違える"
          prevention: "寸法と位置の整合性を必ず確認"
          example: "正面図の円と側面図の矩形の対応確認"
      
      error_recovery_procedure:
        detection_triggers:
          - "推定形状と図面が一致しない"
          - "寸法に矛盾がある"
          - "製造不可能な形状になっている"
        
        recovery_steps:
          step1: "要素分解からやり直し"
          step2: "各図面を独立して再分析"
          step3: "対応関係を慎重に再確認"
          step4: "別の形状仮説を検討"

    # 4.5 必須確認項目の追加
    mandatory_checkpoints:
      before_starting:
        - "[ ] 各図面で要素数を数えた"
        - "[ ] 実線・破線・中心線を区別した"
        - "[ ] φ記号やその他の形状記号を確認した"
        - "[ ] C記号（面取り）とL記号（長さ）を区別した"
      
      during_analysis:
        - "[ ] 複数要素がある場合は複合形状を検討している"
        - "[ ] 各要素の対応関係を確認している"
        - "[ ] 推測ではなく論理的根拠で判断している"
        - "[ ] 記号の意味を文脈で検証している"
      
      before_conclusion:
        - "[ ] 推定形状が全図面と一致することを確認した"
        - "[ ] 寸法の整合性を確認した"
        - "[ ] 製造可能性を確認した"
        - "[ ] 面取り加工が角部に正しく配置されている"
      
      error_prevention_rules:
        single_shape_assumption:
          prohibition: "図面を見て即座に「直方体」などと決めつけることを禁止"
          requirement: "必ず要素分解から開始する"
        
        line_type_neglect:
          prohibition: "実線・破線の区別を無視することを禁止"
          requirement: "線種の意味を必ず確認する"
        
        projection_skip:
          prohibition: "図面間の対応確認を省略することを禁止"
          requirement: "全図面での整合性を必ず確認する"
        
        symbol_misreading:
          prohibition: "記号の意味を推測で判断することを禁止"
          requirement: "記号の標準的意味を必ず確認する"
          examples: "C≠L、φ≠穴の深さ、4-C0.5≠4mm-C0.5"

    # 既存の基本形状定義を修正・拡張
    basic_shapes:
      # 単一基本形状
      rectangular_prism:
        description: "直方体"
        appearance:
          front_view: "矩形"
          side_view: "矩形"
          top_view: "矩形"
        identification: "全図面で矩形が一致し、寸法が整合する"
      
      cylinder:
        description: "円柱"
        appearance:
          axis_parallel_view: "矩形"
          axis_perpendicular_view: "円"
        identification: "一方向から見ると円、他方向からは矩形で寸法が整合"
      
      cone:
        description: "円錐"
        appearance:
          axis_parallel_view: "三角形"
          base_view: "円"
        identification: "底面が円、側面が三角形で先端が尖っている"
      
      sphere:
        description: "球"
        appearance:
          all_views: "円"
        identification: "全方向から見て円で、全ての円のサイズが同じ"
      
      # 複合基本形状の例
      l_shape:
        description: "L字型"
        appearance:
          typical: "二つの矩形が直角に配置"
        identification: "少なくとも一つの図面でL字形状が確認できる"
        composition: "二つの直方体の組み合わせ"
      
      t_shape:
        description: "T字型"
        appearance:
          typical: "垂直方向に伸びる矩形に水平方向の矩形が上部で交差"
        identification: "少なくとも一つの図面でT字形状が確認できる"
        composition: "二つの直方体の組み合わせ"
      
      stepped_shape:
        description: "段差形状"
        appearance:
          typical: "異なる高さの矩形が積み重なっている"
        identification: "側面図で段差が見られる"
        composition: "複数の直方体の積層"
    
    # 加工フィーチャーの定義も維持
    machining_features:
      through_hole:
        appearance: "複数図面で一貫した円形状"
        description: "貫通穴"
      
      counterbore:
        appearance: "段付き円形状"
        description: "ザグリ穴"
      
      chamfer:
        appearance: "角部の斜線"
        description: "面取り"
      
      fillet:
        appearance: "角部の円弧"
        description: "丸み（R）"

  # 5. モデリング手順
  modeling_workflow:
    # 5.1 新しい形状特定ワークフロー（完全改訂）
    shape_identification_workflow:
      # フェーズ1：要素の系統的抽出
      phase1_systematic_extraction:
        front_view_analysis:
          step1: "実線で囲まれた領域をすべて特定"
          step2: "各領域の形状（矩形/円形/その他）を分類"
          step3: "各領域のサイズを確認"
          step4: "重なりや包含関係を記録"
          
          example_output:
            - "要素1：矩形（19×30）"
            - "要素2：円形（φ12）、要素1の上に配置"
        
        side_view_analysis:
          step1: "同様の要素抽出を実施"
          step2: "φ記号による円形要素の確認"
          step3: "積層関係や並列関係を記録"
          
          example_output:
            - "要素1：矩形（Z×5）、下部"
            - "要素2：矩形（φ12×4.5）、上部、円形マーク付き"
        
        top_view_analysis:
          step1: "同様の分析を実施"
          step2: "見えない要素がある場合は記録"
          
          note: "上面図で要素が見えない場合もある"

      # フェーズ2：対応関係の論理的確認
      phase2_correspondence_verification:
        matching_algorithm:
          step1_size_matching:
            rule: "同じサイズの要素は同一要素の可能性が高い"
            example: "正面図φ12 ↔ 側面図φ12×4.5"
          
          step2_position_matching:
            rule: "相対位置が整合する要素は同一要素"
            verification: "投影線による位置確認"
          
          step3_projection_logic:
            rule: "投影方向で形状が変わる論理性確認"
            example: "円柱：正面から見ると円、側面から見ると矩形"
        
        correspondence_table_creation:
          format: "要素ID | 正面図 | 側面図 | 上面図 | 3D形状推定"
          example:
            - "要素A | 矩形19×30 | 矩形Z×5 | 矩形19×Z | 直方体19×30×5"
            - "要素B | 円形φ12 | 矩形φ12×4.5 | 円形φ12 | 円柱φ12×4.5"

      # フェーズ3：3D形状の確定
      phase3_3d_shape_determination:
        individual_element_shapes:
          method: "各要素の3D形状を個別に確定"
          verification: "全図面での見え方と一致するか確認"
        
        spatial_relationship:
          method: "要素間の3D配置関係を確定"
          types: ["積層", "並列", "埋込", "貫通"]
          verification: "図面の位置関係と一致するか確認"
        
        composite_shape_assembly:
          method: "個別要素を組み合わせて最終形状を決定"
          verification: "組み合わせ結果が全図面と一致するか確認"

    # 5.2 基本手順（既存）
    basic_procedure:
      1: "図面の投影法確認"
      2: "基準図面の選定（通常は正面図）"
      3: "外形寸法の確定"
      4: "ベース形状の作成"
      5: "加工フィーチャーの追加"
      6: "寸法・形状の検証"
    
    # 5.3 改良版モデリングワークフロー（既存）
    improved_workflow:
      phase1_preparation:
        1: "図面の投影法確認（第三角法/第一角法）"
        2: "基準図面の選定（通常は正面図）"
        3: "全図面間の対応関係確認（投影線の一致確認）"
      
      phase2_shape_recognition:
        1: "各図面の基本外形形状の特定（矩形/円/三角など）"
        2: "図面間での基本形状の整合性確認"
        3: "基本形状の確定（直方体/円柱/円錐など）"
        4: "形状確定のためのクロスチェック"
      
      phase3_dimension_extraction:
        1: "全体寸法の抽出（最大外形寸法）"
        2: "位置寸法の抽出（基準面からの距離）"
        3: "フィーチャー寸法の抽出（φ、R、角度など）"
        4: "寸法の種類による分類と軸方向の割り当て"
      
      phase4_modeling:
        1: "ベース形状の作成（最大外形寸法に基づく）"
        2: "減算フィーチャーの追加（穴、切欠きなど）"
        3: "加算フィーチャーの追加（突起、フランジなど）"
        4: "仕上げフィーチャーの追加（面取り、丸みなど）"
      
      phase5_verification:
        1: "全ての寸法が反映されているか確認"
        2: "フィーチャーの位置が正確か確認"
        3: "全図面との整合性を確認"
        4: "製造可能性の確認"
    
    # 5.4 複合形状向け改良モデリングワークフロー（新規追加）
    composite_shape_workflow:
      phase1_element_decomposition:
        1: "各図面の独立要素を特定（実線領域のカウント）"
        2: "線種（実線/破線/中心線）の意味を分析"
        3: "各要素の形状分類（矩形/円形/複合など）"
        4: "各要素の寸法特定"
      
      phase2_element_correspondence:
        1: "図面間での要素対応関係を特定"
        2: "サイズの一致による対応付け"
        3: "位置関係の論理的整合性確認"
        4: "対応表の作成（各要素の各図面での見え方）"
      
      phase3_base_shape_creation:
        1: "最大/最も基本的な要素の3D形状確定"
        2: "基本形状のモデリング"
        3: "基準座標系の設定"
        4: "基本寸法の適用"
      
      phase4_secondary_shapes_addition:
        1: "二次的要素の形状確定（円柱/突起/凹みなど）"
        2: "二次要素の位置関係決定"
        3: "結合方法の決定（追加/減算/交差）"
        4: "二次要素のモデリングと結合"
      
      phase5_feature_addition:
        1: "加工フィーチャーの特定（穴/面取り/丸みなど）"
        2: "フィーチャーの寸法と位置の確認"
        3: "フィーチャーの追加"
        4: "最終形状の確認"
      
      phase6_comprehensive_verification:
        1: "全要素が正確にモデル化されているか確認"
        2: "要素間の関係が図面と一致するか確認"
        3: "全体形状が全図面と整合するか確認"
        4: "寸法と公差の最終チェック"
    
    base_shape_creation:
      method: "最大外形寸法で直方体を作成"
      dimension_source: "各軸方向の寸法を各図面から取得"
      origin_setting: "通常は角または中心"
      verification: "作成した形状が全ての図面の外形と一致するか確認"
    
    feature_addition_order:
      1: "減算フィーチャー（穴、切欠き）"
      2: "加算フィーチャー（突起、フランジ）"
      3: "仕上げフィーチャー（面取り、丸み）"
      
    # 5.5 要素分解先行アプローチ（新規追加）
    element_first_approach:
      principle: "形状判断より要素分解を優先する"
      rationale: "要素数と関係性を先に特定することで誤認を防止"
      key_steps:
        1: "要素数の特定（各図面の独立した形状領域をカウント）"
        2: "線種の意味分析（実線/破線/中心線）"
        3: "要素対応の確認（各図面での同一要素の見え方）"
        4: "形状仮説の構築（対応関係から3D形状を推定）"
        5: "仮説検証（推定形状が全図面と整合するか確認）"
      
      benefits:
        - "単一形状と複合形状の区別が明確"
        - "図面間の不整合を早期発見可能"
        - "形状バイアスの影響を最小化"
        - "複雑な形状も系統的に分析可能"
      
      implementation:
        step1: "各図面を独立して分析（他図面の影響を排除）"
        step2: "各図面の要素リスト作成"
        step3: "要素間の対応関係を分析"
        step4: "最も論理的な3D形状仮説を構築"
        step5: "仮説を全図面で検証"
    
    # エラー防止のためのクロスチェックポイント（既存）
    critical_check_points:
      after_shape_recognition:
        - "[ ] 判断した基本形状が全ての図面と一致するか"
        - "[ ] 複合形状の場合、その判断の根拠が明確か"
        - "[ ] 自分の「期待」ではなく図面の「事実」に基づいているか"
      
      after_dimension_extraction:
        - "[ ] 全体寸法と位置寸法を混同していないか"
        - "[ ] 各寸法の基準面を正しく特定できたか"
        - "[ ] 軸方向の割り当てが正確か"
      
      after_base_creation:
        - "[ ] 作成した基本形状が全ての図面と一致するか"
        - "[ ] 原点設定が適切か"
        - "[ ] 全体寸法が正確に反映されているか"
      
      after_feature_addition:
        - "[ ] 各フィーチャーの位置が正確か"
        - "[ ] フィーチャーの種類（穴/切欠きなど）が正しいか"
        - "[ ] 全てのフィーチャーが追加されているか"
      
      # 複合形状のクロスチェックポイント（新規追加）
      after_element_decomposition:
        - "[ ] 全ての図面で要素数を正確にカウントしたか"
        - "[ ] 実線と破線を正しく区別しているか"
        - "[ ] 各要素の形状特徴を明確に記録したか"
      
      after_correspondence_analysis:
        - "[ ] 各要素の図面間対応関係が論理的に整合するか"
        - "[ ] 対応が不明な要素はないか"
        - "[ ] 投影方向による形状変化が論理的に説明可能か"
      
      after_composite_assembly:
        - "[ ] 全ての要素が適切に組み合わされているか"
        - "[ ] 要素間の位置関係が図面と一致するか"
        - "[ ] 最終形状が全図面と整合するか"

  # 6. 日本での図面表記
  japanese_drawing_notations:
    # 6.1 穴加工表記
    hole_notations:
      symbols:
        diameter: 
          symbol: "φ"
          reading: ["まる", "ふぁい"]
        
        hole_depth:
          symbol: "↧"
          reading: "あなふかさ"
        
        counterbore:
          symbol: "⌴"
          reading: ["ざぐり", "ふかざぐり"]
        
        countersink:
          symbol: "⌵"
          reading: "さらざぐり"
    
    # 6.2 面取り加工表記（新規追加）
    chamfer_notations:
      symbol: "C"
      definition: "面取り加工（角部を斜めに削る加工）"
      standard_notation: "C0.5, C1×45°"
      multiple_notation: "4-C0.5（4箇所にC0.5面取り加工）"
      application: "角部の面取り、バリ取り、安全性向上"
      common_mistakes:
        - "C0.5をL=0.5（長さ）と誤読"
        - "4-C0.5を4mm-C0.5と誤読"
        - "面取り加工を穴加工と混同"
      clarification: "面取りは穴加工ではなく、角部の表面加工"
    
    # 6.3 加工種類の区別
    processing_type_distinction:
      surface_processing:
        - "面取り（C記号）: 角部の表面加工"
        - "丸み（R記号）: 角部の表面加工"
        - "表面粗さ: 表面仕上げ加工"
      hole_processing:
        - "ドリル穴（φ記号）: 貫通または止まり穴"
        - "タップ穴（M記号）: ねじ穴加工"
        - "リーマ穴（H7等）: 精密穴加工"
      critical_distinction: "表面加工と穴加工を明確に区別する"
    
    # 6.4 数量表記の読み方
    quantity_notations:
      pattern: "数字-記号"
      examples:
        - "4-C0.5: 4箇所にC0.5面取り加工"
        - "3-M3THRU: 3箇所にM3貫通ねじ穴"
        - "2-φ3H7THRU: 2箇所にφ3H7貫通穴"
      reading_rule: "数字は箇所数、記号は加工種類"
    
    # 6.5 記号誤読防止システム
    symbol_misreading_prevention:
      mandatory_verification:
        step1: "記号を文字として認識（C、L、φ等）"
        step2: "記号の標準的意味を確認"
        step3: "文脈での妥当性を検証"
      symbol_meanings:
        C: "面取り加工（表面加工）"
        L: "長さ寸法"
        φ: "円・穴径"
        M: "ねじ穴"
        R: "丸み・半径"
      verification_questions:
        - "この記号は加工指示か寸法指示か？"
        - "表面加工か穴加工か？"
        - "数量表記（4-C0.5）か単位表記（L=0.5）か？"
    
    hole_types:
      drill_hole:
        notation: ["φ10", "10キリ", "10D"]
        description: "ドリル工具で加工する穴"
        bottom_shape: "円錐状（118度）"
      
      reamer_hole:
        notation: ["φ10リーマ", "10DR", "φ10H7"]
        description: "リーマ工具で加工する寸法精度の高い穴"
      
      through_hole:
        notation: ["φ10 貫通", "φ10"]
        description: "貫通穴"
        depth_notation: "深さ指示なし"
      
      blind_hole:
        notation: ["φ10↧15", "φ10 深さ15"]
        description: "止まり穴（有底穴）"
        depth_definition: "円筒部の深さ（円錐部含まない）"
      
      counterbore_hole:
        shallow:
          notation: ["⌴φ20×1 φ10"]
          description: "ざぐり（浅い座面加工）"
          purpose: "六角ボルトの座面をきれいにする"
        
        deep:
          notation: ["⌴φ15×10 φ8"]
          description: "深ざぐり（深い沈み穴）"
          purpose: "六角穴付きボルトの頭を沈みこませる"
          bottom_shape: "フラット"
      
      countersink_hole:
        notation: ["⌵φ16 φ8", "⌵φ16×90° φ8"]
        description: "皿ざぐり（皿穴）"
        purpose: "皿ねじの頭を沈みこませる"
        angle: "90度円錐"
    
    multiple_holes:
      notation: "4×φ10"
      rule: "同一箇所の一群の穴の総数を記入"

  # 7. CAD実装設定
  cad_implementation:
    coordinate_setup:
      origin: [0, 0, 0]
      x_positive: "右"
      y_positive: "奥"
      z_positive: "上"
    
    creation_order:
      1: "CreateBox3DTool（外形作成）"
      2: "CreateCylinder3DTool（円形フィーチャー）"
      3: "BooleanSubtract（減算加工）"
      4: "BooleanUnite（結合加工）"
    
    hole_modeling:
      drill_hole:
        shape: "円柱 + 底面円錐（118度）"
      
      counterbore_shallow:
        shape: "貫通穴 + 浅い円筒穴（通常1mm）"
      
      counterbore_deep:
        shape: "貫通穴 + 深い円筒穴（底面フラット）"
      
      countersink:
        shape: "貫通穴 + 90度円錐穴"

  # 8. 検証項目
  verification:
    dimensional_consistency:
      - "各図面間での寸法一致"
      - "加工フィーチャーの位置関係"
      - "材料厚みの一貫性"
    
    geometric_consistency:
      - "対称性の確認"
      - "中心線の一致"
      - "角度・勾配の正確性"
    
    manufacturability:
      - "抜き勾配の考慮"
      - "最小寸法の確認"
      - "加工順序の妥当性"
    
    # 形状認識の検証（追加）
    shape_recognition_verification:
      base_shape_validation:
        - "モデル化した基本形状が全図面の外形と一致するか"
        - "基本形状の各面が対応する図面の形状と一致するか"
        - "複合形状の場合、全ての構成部分が図面と整合しているか"
      
      feature_validation:
        - "各加工フィーチャーの種類（穴/切欠き等）が正しいか"
        - "フィーチャーの位置が全図面で整合しているか"
        - "フィーチャーのサイズが図面指示と一致しているか"
      
      common_errors_check:
        - "単純形状を複雑に誤認していないか（L字型錯覚など）"
        - "位置寸法と全体寸法を混同していないか"
        - "基準面からの距離を正確に再現しているか"
    
    # 検証プロセスの強化（追加）
    enhanced_verification_process:
      step1_objective_comparison:
        method: "モデルと図面を並べて客観的に比較"
        action: "モデルの各面と対応する図面を直接照合"
        guideline: "自分の期待ではなく図面の事実に基づいて比較"
      
      step2_dimension_check:
        method: "全ての寸法を再測定"
        validation: "モデル上の計測値と図面寸法値の一致確認"
        critical_points: "全体寸法、位置寸法、フィーチャー寸法を個別確認"
      
      step3_comprehensive_review:
        method: "作成プロセス全体の論理的再検証"
        points:
          - "基本形状の判断が正しかったか"
          - "寸法の種類分類が適切だったか"
          - "基準面の特定が正確だったか"
          - "全図面間の整合性を確認したか"

  # 9. よくある間違いと対策
  common_mistakes:
    projection_confusion:
      problem: "投影法の混同"
      solution: "図面右下の投影記号を確認"
      symbols:
        third_angle: "円錐台の投影図"
        first_angle: "円錐の投影図"
    
    dimension_line_confusion:
      problem: "寸法線を実際の形状線と混同"
      solution: "寸法線（細線）と形状線（太線）を区別して判読"
      note: "寸法線は形状を示すものではない"
    
    dimension_duplication:
      problem: "同じ寸法を複数図面から取得"
      solution: "各軸方向の寸法は1つの図面から"
    
    hidden_line_oversight:
      problem: "隠れ線の見落とし"
      solution: "破線で示された内部形状の確認"
    
    # 形状認識の錯覚（追加）
    shape_illusion:
      problem: "単一図面を見て複雑な形状と誤認（例：L字型の錯覚）"
      causes:
        - "複雑性への期待バイアス"
        - "部分的観察での早急な結論"
        - "思い込みの投影"
      solutions:
        step1: "全図面の基本形状をまず特定する"
        step2: "図面間の形状整合性を必ず確認する"
        step3: "最もシンプルな解釈から始める"
        step4: "複雑な形状の判断には明確な根拠を要求する"
    
    # 寸法分類の混同（追加）
    dimension_type_confusion:
      problem: "全体寸法と位置寸法の混同"
      example: "位置寸法（例：穴の位置15mm）を全体寸法と誤認"
      causes:
        - "寸法線の種類の区別不足"
        - "基準面の認識不足"
        - "推測による補完"
      solutions:
        step1: "寸法を「全体寸法」「位置寸法」「フィーチャー寸法」に分類"
        step2: "各寸法の基準面を明確に特定"
        step3: "不明な寸法は推測せず「不明」と明記"
        step4: "位置寸法は必ず基準面との関係で理解する"

  # 10. 実務上の注意点
  practical_notes:
    modern_trends:
      - "普通公差を適用させる前提"
      - "ドリル穴は公差なし表記"
      - "リーマ穴ははめあい公差付き(H7など)"
      - "ねじ穴はM表記"
      - "加工方法指示なしでも混乱が生じない傾向"
    
    terminology:
      strict_distinction:
        counterbore_shallow: "ざぐり（浅い）"
        counterbore_deep: "深ざぐり（深い）"
      
      practical_usage:
        note: "除去加工を前提にしている設計者の多くは、深ざぐりのことをざぐりと表現"
    
    casting_parts:
      counterbore_indication: "ざぐりを指示する面に除去加工なしの表面粗さ記号がセット"
      depth_standard: "深さ指示が不要でもJISでの例が1mmなので1mmで指示"

  # 11. エラー対処システム（追加）
  error_handling_system:
    error_detection_triggers:
      dimensional_inconsistency:
        trigger: "同一軸で異なる寸法値を読み取った場合"
        action: "全ての寸法読み取りを最初からやり直し"
      
      axis_assignment_confusion:
        trigger: "軸方向の割り当てに確信が持てない場合"
        action: "投影関係の再確認から開始"
      
      missing_dimensions:
        trigger: "X,Y,Z軸のいずれかの寸法が特定できない場合"
        action: "見落とし防止の再スキャン実施"
    
    root_cause_analysis:
      observation_error:
        causes: ["系統的スキャンの不実施", "確認作業の省略", "推測の混入"]
        prevention: "観察チェックリストの強制実行"
      
      understanding_error:
        causes: ["軸対応関係の誤解", "投影法の理解不足", "寸法分類の混同"]
        prevention: "基礎知識の再確認と理解度テスト"
      
      cognitive_bias:
        causes: ["確認バイアス", "複雑性回避", "パターン認識の早急化"]
        prevention: "意識的なバイアス排除と複数視点での確認"
    
    recovery_procedure:
      immediate_action:
        step1: "現在の作業を完全停止"
        step2: "エラーの種類と原因を特定"
        step3: "該当する改善手順を実行"
        step4: "最初から観察プロセスを再開"
      
      quality_assurance:
        rule: "エラー発生後は必ず2人以上での確認を実施"
        method: "独立した確認者による寸法読み取りの検証"

  # 12. スキル向上のための訓練システム（追加）
  skill_development_system:
    basic_observation_training:
      exercise_1:
        name: "数値位置特定訓練"
        method: "図面上の全数値を位置付きでリスト化"
        success_criteria: "見落とし率0%"
      
      exercise_2:
        name: "軸対応関係訓練"
        method: "各図面の軸方向を矢印で明示"
        success_criteria: "正確性100%"
      
      exercise_3:
        name: "寸法分類訓練"
        method: "全寸法を種類別に分類"
        success_criteria: "分類精度95%以上"
    
    progressive_difficulty:
      level_1: "単純な直方体（寸法3個）"
      level_2: "穴付き部品（寸法5-7個）"
      level_3: "複合形状部品（寸法10個以上）"
      
      advancement_criteria: "各レベルで連続5回成功"
    
    self_assessment_tools:
      checklist_compliance_rate:
        measurement: "観察チェックリストの実行率"
        target: "100%実行"
      
      error_rate_tracking:
        measurement: "寸法読み取りエラーの発生率"
        target: "月間エラー率5%以下"
      
      time_efficiency:
        measurement: "正確な寸法読み取りに要する時間"
        target: "品質を保ちながら効率化"

  # 13. 必須実行項目（追加）
  mandatory_requirements:
    before_any_analysis:
      - "ガイドラインの該当セクションを読み直す"
      - "強化版観察チェックリストを手元に準備する"
      - "記号誤読防止システムを確認する"
      - "エラー対処手順を確認する"
    
    during_analysis:
      - "各ステップ完了時にチェックリストに記録"
      - "不明点は推測せず「不明」として記録"
      - "矛盾発見時は即座に作業を停止"
      - "記号発見時は必ず意味を確認"
    
    after_analysis:
      - "全結果をダブルチェック"
      - "ガイドライン遵守度を自己評価"
      - "エラーがあった場合は原因分析を実施"
      - "記号の解釈が正しかったか再確認"

    compliance_verification:
      self_check_questions:
        - "強化版観察チェックリストを100%実行したか？"
        - "軸対応関係を正確に把握したか？"
        - "全寸法を2回以上確認したか？"
        - "推測や思い込みが混入していないか？"
        - "記号の意味を正しく理解したか？"
        - "要素数のカウントを正確に行ったか？"
    
      failure_consequences:
        - "チェック項目に1つでも未実行があれば最初からやり直し"
        - "エラー発生時は原因分析レポートを作成"
        - "継続的なエラーがある場合は基礎訓練に戻る"
        - "記号誤読が発生した場合は記号知識の再学習を実施"
